# Deep ROP后台接口文档
# author: 黄凯得
# 最后一次修改: 2020.08.17

用户登录:
/login
需要数据:
username: 用户名
password: 密码
返回值:
res: 
    success: 表示用户登录成功
    error: 表示用户登录失败, 失败原因可能是用户名密码错误, 也可能是数据交互出现错误, 具体原因会在desc字段描述
desc: 
    对res的描述, 如: 登录错误:用户名密码错误
role:
    当res为success时存在这个返回值, 表示用户角色, 如doctor表示眼科医生角色
next:
    应跳转的页面,  比如用户访问数据导出页面, 由于尚未登录被跳转到了登录页面, 此时应在用户登录成功后直接跳转到用户期望访问的页面, 而不是系统首页
    如果返回值中有这个字段, 则跳转到next指向的地址, 否则默认为系统首页


通过网站上传病例:
/uploadInWeb
需要数据: 
dfile(文件列表)
返回值:
res: 
    success: 表示文件上传成功
    error: 表示文件上传失败
desc: 
    对res的描述, 如: 上传完成
uploadState:
    对所有用户上传的病例文件的描述, 以列表形式返回
    只返回保存失败的文件的描述, 如保存成功则不返回信息
    比如: 用户上传了5个病例, 其中3个病例保存成功, 剩下2个病例保存失败,
    则返回:
        ["病例 [zhang san zx0402964 20200506] 格式错误, 无法读取病例信息",
         "病例 [li si 20204534 20200506] 格式错误, 无法读取病例信息"]
    如用户上传的所有病例均保存成功, 则返回: []


P.S. 大部分的接口需要用户登录才能正常使用, 我重写了login_required的回调接口, 当请求为GET格式的时候会返回302(flask redirect), 浏览器会自动跳转到登录页面
     当请求为POST形式的时候(如上传接口), 会返回json字符串, 内容为: {res:"unauthorized", desc:"please login first"}
     当res为unauthorized时, 前端应提示用户登录并自动跳转到登录页面




